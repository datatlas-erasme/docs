
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Erasme" name="author"/>
<link href="https://datatlas-erasme.github.io/docs/FR/advanced.md/" rel="canonical"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.1, mkdocs-material-8.4.1" name="generator"/>
<title>Documentation en français - Datatlas</title>
<link href="../../assets/stylesheets/main.69437709.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.cbb835fc.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#documentation-en-francais">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Datatlas" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Datatlas">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Datatlas
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Documentation en français
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Datatlas" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Datatlas">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Datatlas
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Home
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#presentation-datatlas">
    🌍 Presentation Datatlas
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#structuration-de-datatlas">
    📄 Structuration de datatlas
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#back">
    🔩 Back
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#front">
    🗺 Front
  </a>
<nav aria-label="🗺 Front" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#structuration-des-sources-de-donnees">
    Structuration des sources de donnees
  </a>
<nav aria-label="Structuration des sources de donnees" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#notion">
    Notion
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wordpress">
    Wordpress
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geojson">
    Geojson
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration-instance">
    Configuration instance
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deployement">
    Deployement
  </a>
<nav aria-label="Deployement" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#variables-denvironement">
    Variables d'environement
  </a>
<nav aria-label="Variables d'environement" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#datatlas_back_end_port">
    DATATLAS_BACK_END_PORT
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#notion_api_key">
    NOTION_API_KEY
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bearer_token">
    BEARER_TOKEN
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#front_1">
    Front
  </a>
<nav aria-label="Front" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#structure-du-front">
    Structure du front
  </a>
<nav aria-label="Structure du front" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sidepanel">
    Sidepanel
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#filter-panel">
    Filter Panel
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#about-modal">
    About Modal
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#icone-personalisees">
    icone personalisees
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="documentation-en-francais">Documentation en français</h1>
<h2 id="presentation-datatlas">🌍 Presentation Datatlas</h2>
<p><img alt="" src="medias/datatlas-industries.png"/></p>
<p>Datatlas a pour vocation de faciliter l'affichage de diverses sources de données sur une carte
L'outil se base sur kepler.gl qui facilite le traitement de source de donnes en geojson/json/csv et l'affichage de larges sources de données en webgl</p>
<h2 id="structuration-de-datatlas">📄 Structuration de datatlas</h2>
<div class="mermaid">graph TD

Backend --&gt; Frontend

OpenData_API_Geojson --&gt; Backend

Notion_Table --&gt; Backend

Wordpress --&gt; Backend
</div>
<p>Datatlas est constitue d'un back en capacité de recupérer les sources de données suivantes :
- Table Notion (<a href="####Notion">Voir structure table notion</a>) 
- API Wordpress (<a href="####Wordpress">Voir structure table wordpress</a>) 
- Geojson (<a href="####Geojson">Voir structure table geojson</a>)</p>
<p>Ces données sont stockées dans un fichier nommé LayersConfiguration.json</p>
<p>Lorsque les sources de donnees ne sont pas formatées en geojson, le back applique un traitement de ces données et le formate en un format propre à kepler.gl (la librairie utilisée par le front pour afficher les données cartographiques)</p>
<p>Le Front vient lui tirer les données du back et les affiche avec kepler.gl
Un nouveau layer graphique propre à Datatlas est construit sur la base de ces données et permet de filtrer ces memes donnees sur la carte</p>
<h2 id="back">🔩 Back</h2>
<h2 id="front">🗺 Front</h2>
<div class="mermaid">graph TD
    A[index.tsx] --&gt; B(App.js)
    B --&gt; C{Front}
    C --&gt; D[Map] --&gt; D1(KeplerGl) --&gt; D2(Kepler reducer)
    C --&gt; E[Panel]
    E --&gt; H(AddButton)
    E --&gt; I(MobilePanelControl)
    E --&gt; J(DesktopPanelControl)
    I --&gt; I1([SearchBar])
    I --&gt; I2([ButtonSwitch])
    I --&gt; I3([Collapse]) --&gt; I4([List])
        I4 --&gt; I41([Checkbox])
        I4 --&gt; I42([ButtonDay])
        I4 --&gt; I43([ButtonSelect])
        I4 --&gt; I45([ButtonIcon])
    J --&gt; J1([SearchBar])
    J --&gt; J2([ButtonDefault])
    J --&gt; J4([ButtonDay])
    J --&gt; J3([Collapse]) --&gt; J5([List])
        J5 --&gt; J51([Checkbox])
        J5 --&gt; J52([ButtonDay])
        J5 --&gt; J53([ButtonSelect])
        J5 --&gt; J55([ButtonIcon])
</div>
<h3 id="structuration-des-sources-de-donnees">Structuration des sources de donnees</h3>
<p>Les sources de données n'ayant pas les memes format, la back de datatlas vient s'interfacer entre l'api de la source et le front afin d'y appliquer un traitement qui soit lisible pour le front</p>
<h4 id="notion">Notion</h4>
<p>le back est capable grace à l'id d'une table notion de tirer une table notion et de l'exporter en un json lisible par kepler.gl</p>
<p>Le back est capable de traiter n'importe quelle table notion contenant les types de champs suivants :
- date
- simple select
- multi-select
- texte court
- texte long
- email
- telephone
- nombre</p>
<p>néanmoins certains type de champs sont obligatoires ou possèdent certaines fonction une fois chargés sur le front
- latitude et longitude : leurs nom ne doit pas changer permettent le bon affichage des points sur la carte
- icon : permet l'affichage d'une icone à la place du point sur la carte, par defaut utilise la liste d'icone fournie par kepler.gl <a href="https://d1a3f4spazzrp4.cloudfront.net/kepler.gl/icons/svg-icons.json">voir liste icones</a> , ces icones peuvent êtres personnalisées <a href="###icone-personalisees">voir personalisation icone </a>
- image : permet l'affichage d'une image dans le sidepanel du Front. Ce champ de type texte doit être nommé <code>image</code> et doit contenir une url vers une images (https://monserveur/monimage.jpg)</p>
<p>Une fois votre tableau construit et remplis  il est nécessaire de le partager à votre <a href="https://www.notion.so/my-integrations">integration notion</a>  et d'inclure votre clef api notion dans les variables d'environement du back à son deploiement <a href="####Variables-d'environement">Voir variables d'environement</a></p>
<p>Il faudra ensuite l'ajouter la table comme un layer de données dans le fichier de configuration d'instance du  back  <strong>LayersConfiguration.json</strong></p>
<h4 id="wordpress">Wordpress</h4>
<p>Concernant les layers wordpress, le back va tirer les données de l'api wordpress et les formater ensuite au format kepler.gl</p>
<p><strong>⚠ A ce jour le module wordpress n'est pas modulaire et ne fonctionne que sur des cas d'usages precis</strong></p>
<h4 id="geojson">Geojson</h4>
<p>Concernant le format geojson, le back n'applique aucun formatage de données desssus, il ne sert que de passerelle entre la source de la donnée et le front, kepler.gl sur le front est en capacité de traiter ces données
N'importe quelle source de données en geojson devrait etre supportée</p>
<h3 id="configuration-instance">Configuration instance</h3>
<h3 id="deployement">Deployement</h3>
<h4 id="variables-denvironement">Variables d'environement</h4>
<h5 id="datatlas_back_end_port">DATATLAS_BACK_END_PORT</h5>
<h5 id="notion_api_key">NOTION_API_KEY</h5>
<h5 id="bearer_token">BEARER_TOKEN</h5>
<h2 id="front_1">Front</h2>
<h3 id="structure-du-front">Structure du front</h3>
<h4 id="sidepanel">Sidepanel</h4>
<h4 id="filter-panel">Filter Panel</h4>
<h4 id="about-modal">About Modal</h4>
<h3 id="icone-personalisees">icone personalisees</h3>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
<script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script><script>mermaid.initialize({});</script></body>
</html>